<!DOCTYPE html>
<html lang="en">

<head>
  <title>Hallway Interactive</title>
  <link rel="stylesheet" href="1-src/main.css">
  <link rel="stylesheet" href="1-src/popup.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="1-src/popup.js"></script>
  <script src="1-src/fade.js"></script>

  <script src="1-src/layout.js"></script>
  <style>
    .container {
      background: url('hallway/bgd-hallway.png') 100% 100%;
    }

    .popup img {
      max-width: 1920px;
      height: auto;
    }

    #imagePopup1 img {
      max-width: 500px;
      /* Image size for popup 1 */
      height: auto;
    }

    .slideshow-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.267);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      cursor: pointer;
    }

    .slideshow-overlay img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
  </style>
</head>

<body style="margin:0;overflow:hidden">

  <div class="container">

    <img src="hallway/button-pushstick.png" class="button" style="top: 785px; left: 350px; width: 160px; height: auto;"
      onclick="popup.showImage({images: 'hallway/animation-pushstick.gif', name: 'pushstick', fullscreen: true, tintBackground: false, takeOverScreen: true})">

    <img src="hallway/button-pushstick.png" class="button" style="top: 785px; left: 750px; width: 160px; height: auto;"
      onclick="popup.showImage({images: 'hallway/animation-pushstick-2.gif', name: 'pushstick2', fullscreen: true, tintBackground: false, takeOverScreen: true})">

    <img src="hallway/button-stair.png" class="button" style="top: 825px; left: 840px; width: 395px; height: auto;"
      onclick="popup.showImage({images: 'hallway/animation-pushstick-3.gif', name: 'stair', fullscreen: true, tintBackground: false, takeOverScreen: true})">

    <button class="button button-back" onclick="fadeToScene('character.html')"></button>
    <button class="button button-next" onclick="fadeToScene('workplace-interactive.html')"></button>

  </div>







  <script>

    // SLIDESHOW

    const slideshowImages = [
      'hallway/text1.png',
      'hallway/text2.png',
    ];

    // BACKGROUND MUSIC
    var music = new Audio('0-music/compdata-r0.mp3');
    music.loop = true;
    let musicStarted = false;

    function startMusic() {
      if (!musicStarted) {
        music.play();
        musicStarted = true;
        console.log('Music started');
      }
    }

    // Global click handler using capture phase
    // This will catch ALL clicks on the page, even in popups that use stopPropagation()
    document.addEventListener('click', function (e) {
      startMusic();
      console.log('Click detected (capture phase)');
    }, true); // true = use capture phase


    // Show popup on load
    window.addEventListener('DOMContentLoaded', function () {
      popup.showImage({
        images: slideshowImages,  // array of images
        name: 'slides',          // popup name
        fullscreen: false,       // fullscreen (false = with margins)
        tintBackground: true,    // tintBackground
        takeOverScreen: true     // takeOverScreen
      });
    });
  </script>
</body>

</html>